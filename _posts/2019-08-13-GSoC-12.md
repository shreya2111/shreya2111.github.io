---
title:  "GSoC 2019 - Extending Gentle Aligner"
date:   2019-08-13
layout: default
author_profile: false
comments: false
tags: [GSoC, ASR, Forced-Alignment]
category: GSoC
permalink: "gsoc/gsocWk11"
---

![GSoC](/icons/GSoC.png)

<h1> Extending Gentle Aligner </h1>
<h2> Week 11 </h2>
<h4> Putting everything together in a Singularity Container </h4>

* Plan to deploy the work [Singularity Container]

 - connect through cisco vpn
 - ssh case-id@rider.case.edu
 - go to gallina home_dir
 - start a screen session
 - run following commands

    - module load singularity/2.5.1
- create a file called `Singularity` in a directory of your choice in a system where you have `sudo` access.
- sample file:
        
        Bootstrap: docker
        From: ubuntu:19.04

        %post
            apt-get -y update
            apt-get -y install fortune cowsay lolcat
            apt-get -y install python3
            apt-get -y install git-all
            apt-get -y install g++ make automake autoconf wget sox libtool subversion python2.7 zlib1g-dev
            mkdir -p /opt/shreya
            mkdir -p /opt/shreya
            cd /opt/shreya
            if [ ! -d kaldi ] ; then git clone https://github.com/kaldi-asr/kaldi.git ; fi
            cd kaldi/tools
            if [ ! -f /opt/shreya/kaldi/built-ok ] ; then extras/check_dependencies.sh ; fi
            if [ ! -f /opt/shreya/kaldi/built-ok ] ; then make -j ; fi
            if [ ! -f intel-mlk-installed ] ; then extras/install_mkl.sh && touch intel-mlk-installed ; fi
            if [ ! -f /opt/shreya/kaldi/built-ok ] ; then extras/install_irstlm.sh ; fi
            cd ../src
            if [ ! -f /opt/shreya/kaldi/built-ok ] ; then ./configure ; fi
            if [ ! -f /opt/shreya/kaldi/built-ok ] ; then make depend -j ; fi
            if [ ! -f /opt/shreya/kaldi/built-ok ] ; then make -j ; fi
            cd /opt/shreya
            if [ ! -d gentle-labs ] ; then git clone https://github.com/shreya2111/gentle-labs.git ; fi
            if [ ! -f kaldi/build-ok ] ; then mv gentle-labs/v2/gentle/ kaldi/egs/ ; fi
            touch kaldi/build-ok
            if [ ! -f gentle ] ; then git clone https://github.com/lowerquality/gentle.git ; fi
            cd gentle/
            if [ -f install.sh ] ; then ./install.sh ; fi
            echo hello > /opt/shreya/ok.txt

        %environment
            export LC_ALL=C
            export PATH=/usr/games:$PATH

        %runscript
            fortune | cowsay | lolcat
            cat /opt/shreya/ok.txt

 - singularity build gentle.simg Singularity
 - singularity run gentle.simg

* Next: Summary [Week 12](https://shreya2111.github.io/gsoc/report)
* Prev: Summary [Week 10](https://shreya2111.github.io/gsoc/gsocwk10)
* [main page](https://shreya2111.github.io/gsoc)

Tools:
Kaldi, Python libraries, C++

Link to [GSoC Project Repository](https://github.com/shreya2111/gentle-labs)